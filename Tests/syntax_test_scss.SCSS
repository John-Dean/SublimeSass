// SYNTAX TEST "Packages/SASS/Syntaxes/SCSS.sublime-syntax"

/*
  Nested selectors and &
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#nested_rules
  Variables and !global etc
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#variables_
*/
#main h1+.sub {
//    ^^ meta.selector.css entity.name.tag.css
//     ^ - constant.numeric
//            ^ punctuation.section.property-list.begin.css
  color: #00ff00;
  height: 97%;
  $width: 5em !global;
//^^^^^^ variable.declaration.scss
//^ punctuation.definition.variable.scss
//            ^^^^^^^ keyword.other.scss
  width: $width;
//^^^^^ meta.property-name.css
// ^ support.type.property-name.css
//     ^ punctuation.separator.key-value.css
//      ^^^^^^^ meta.property-value.css
//       ^^^^^^ variable.other.scss
//       ^ punctuation.definition.variable.scss
//             ^ punctuation.terminator.statement.css

  .redbox {
    background-color: #ff0000;
    color: #000000;
  }
  &:hover { text-decoration: underline; }
//^^^^^^^ meta.selector.css
//^ keyword.operator.ampersand.scss
// ^ entity.other.pseudo-class.css punctuation.definition.entity.css
  body.firefox & { font-weight: normal; }
}
// <- punctuation.section.property-list.end.css


/*
  Nested properties
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#nested_properties
*/
.funky {
  font: {
//  ^ meta.property-name.css support.type.property-name.css
    family: fantasy;
//                ^ meta.property-value.css support.constant.font-name.css
//  ^ meta.property-name.css support.type.property-name.css
    size: 30em;
//  ^ meta.property-name.css support.type.property-name.css
    weight: bold;
//  ^ meta.property-name.css support.type.property-name.css
  }
  font: 20px/24px fantasy {
//                ^ meta.property-value.css support.constant.font-name.css
//  ^ meta.property-name.css support.type.property-name.css
    weight: bold;
//  ^ meta.property-name.css support.type.property-name.css
  }
}


/*
  Comments
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#comments
  block comment contains #{ $variable }
  block comment contains #{ function($variable) + "escap\e" + -.5em }
*/
// <- comment.block.css punctuation.definition.comment.css

// line comment
// line comment contains #{ $variable }
// line comment contains #{ function($variable) + "escap\e" + -.5em }
// <- comment.line.double-slash.scss punctuation.definition.comment.css


/*
  Strings, (un)quoted, operations and interpolation
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#sass-script-strings
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#interpolation_
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#string_operations

*/
@mixin firefox-message($selector) {
// <- meta.at-rule.scss punctuation.definition.keyword.scss
// ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.at-rule.scss
// ^ keyword.control.at-rule.scss
//     ^^^^^^^^^^^^^^^ entity.name.function.scss
//                    ^ meta.group.scss meta.function.parameters.scss punctuation.section.group.begin.scss
//                              ^ meta.group.scss meta.function.parameters.scss punctuation.section.group.end.scss
//                     ^^ meta.function.parameters.scss variable.other.scss
//                     ^ punctuation.definition.variable.scss
  body.firefox #{$selector}:before {
//             ^^^^^^^^^^^^ meta.group.interpolation.scss
//             ^ punctuation.definition.variable.scss
//              ^ punctuation.definition.group.begin.scss
//               ^^^^^^^^^ variable.other.scss
//               ^ punctuation.definition.variable.scss
//                        ^ punctuation.definition.group.end.scss
//                         ^ punctuation.definition.entity.css
//                          ^ entity.other.pseudo-element.css

    content: "Hi, Firefox users!";
//           ^^^^^^^^^^^^^^^^^^^^ meta.property-value.css string.quoted.double.css
//           ^ punctuation.definition.string.begin.css
//                              ^ punctuation.definition.string.end.css
    content: 'Hi, Firefox users!';
//           ^^^^^^^^^^^^^^^^^^^^ meta.property-value.css string.quoted.single.css
//           ^ punctuation.definition.string.begin.css
//                              ^ punctuation.definition.string.end.css
    background: url(data:image/gif;base64,R0lGODlhEAAQAMQAAORHHOVSKudfOulrSOp3WOyDZu6QdvCchPGolfO0o/XBs/fNwfjZ0frl3/zy7////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABAALAAAAAAQABAAAAVVICSOZGlCQAosJ6mu7fiyZeKqNKToQGDsM8hBADgUXoGAiqhSvp5QAnQKGIgUhwFUYLCVDFCrKUE1lBavAViFIDlTImbKC5Gm2hB0SlBCBMQiB0UjIQA7);
//                  ^^^^^ string.unquoted.css
  }
  p::before; {
    background-image: some bullshit string;
//                    ^^^^^^^^^^^^^^^^^^^^ - string
    cursor: e + -resize;
//          ^ string.unquoted
//           ^ - string
//            ^ keyword.operator.scss
//             ^ - string
//              ^^^^^ string.unquoted
    content: "Foo " + Bar;
//               ^ string.quoted.double
//                    ^ string.unquoted
//                       ^ - string
//                  ^ keyword.operator.scss
    font-family: sans- + "serif";
//               ^^^^^ string.unquoted
//                              ^ - string
//                     ^ keyword.operator.scss
    content: "I ate #{5 + 10} pies!";
//           ^^^^^^^^^^^^^^^^^^^^^^^ string.quoted.double
//                  ^^^^^^^^^ meta.group.interpolation.scss
//                  ^ punctuation.definition.variable.scss
//                   ^ punctuation.definition.group.begin.scss
//                    ^ constant.numeric.css
//                      ^ keyword.operator.scss
//                        ^ constant.numeric.css
//                          ^ punctuation.definition.group.end.scss
    content: "I ate #{$value} pies!";
//                    ^^^^^^ variable.other.scss
//                    ^ punctuation.definition.variable.scss
    width: $base-width + 2 * 5rem;
//                      ^^^^^^^^^ - string
//                       ^ constant.numeric
    @include breathe(somestring);
//                   ^ string.unquoted.css
//                             ^ - string
    @include breathe(border-bottom-color);
//                   ^^^^^^^^^^^^^^^^^^^ support.type.property-name.css
  }
}

@include firefox-message(".header" + test);
//                       ^^^^^^^^^ meta.group.scss meta.function.parameters.scss string.quoted.double.css
//                                 ^ keyword.operator.scss
//                                   ^ string.unquoted.css
//                                       ^ - string


/*
  Lists, Maps
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#maps
*/
$map: (
  $key-1: #000,
  key-2: (
    key-3: 123px
  )
);
.selector {
  color: nth(map-merge($map, $map2), 3);
//       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.property-value.css meta.function-call.scss
//       ^^^ support.function.scss
//          ^ punctuation.section.group.begin.scss
//           ^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function.parameters.scss
//           ^^^^^^^^^ support.function.scss
//                    ^ punctuation.section.group.begin.scss
//                         ^ punctuation.separator.css
//                                ^ punctuation.section.group.end.scss
}


/*
  Color Operations
  https://sass-lang.com/documentation/file.SASS_REFERENCE.html#color_operations
*/
$translucent-red: rgba(255, 0, 0, 0.5);
//                ^^^^ support.function.misc.css
p {
  color: opacify($translucent-red, 0.3);
//       ^^^^^^^ support.function.scss
//              ^ punctuation.section.group.begin.scss
  background-color: transparentize($translucent-red, 0.25);
//                  ^^^^^^^ support.function.scss
}



// old tests


// id selectors
#id {}

#id-#{$variable}-selector {}

#id-#{$variable}-#{$variable} {}

#id-#{$variable}-selector,
#another-id-selector {}

#id-#{$variable}-selector, #another-id-selector {}

#id:hover::before {}

#id:not(body)::before {} // body should be highlighted as type selector not value

#id:not(body):not(#id):not(.class):not(:first-child) {}

#id:not(#{$variable})::before {}


.class {}

.class-#{$variable}-selector {}

.class-#{$variable}-#{$variable} {}

.class-#{$variable}-selector,
.another-class-selector {}

.class-#{$variable}-selector, .another-class-selector {}

.class:haver::before {}

.class:not(body)::before {}

.class:not(body):not(#id):not(.class):not(:first-child) {}

.class:not(#{$variable})::before {}


#id.class:nth-of-type(2n) {}

.class#id:nth-child(2n-1) {}
.class#id:nth-child(2n+1) {}
.class#id:nth-child(2n - 1) {}


#id .class,
#id > .class,
#id ~ .class,
#id + .class {}


*,
*::before,
*::after {}


#{$variable}::before {}

##{$variable}-selector::before {}

.#{$variable}-selector::before {}


[attr] {}
a[title] {} // title should be highlighted as attribution, not type selector
a[href=""] {}
a[href=ab-_a123c] {}
a[href*=""] {}
a[href^=""] {}
a[href$=""] {}
a[data-*=""] {}
a[data~=""] {}
a[data|=""] {}


%placeholder {}

@extend %placeholder-a1o_321;

%#{$variable}-placeholder {} // Interpoluation in placeholder selector


::-webkit-selection {}
::selection {}


.block {
  &.class {}
  &::before {}

  &__element {}
  &--modifier {}
  &__element--#{$modifier} {}

  &#{$variable} {}

  &:not(&-#{$variable}) {}
}


:root {
  --css-variable_123: 20px;
}

body {
  padding: var(--css-variable_123);
  proprety-#{$variable}: value;
  #{$var}-proprety: value;
  proprety-#{$var}-proprety: value;
}


$variable: 123px;
$variable123: #fff;
$va1ri2ab3le-321a: #ABCDEF !default;
$_va1ri_2ab3le_321a: inline !important;
$variable: function($variable);

$map: (
  body: (
    width-1: 200px * $variable #{$variable} 'stirng',
    height: (
      "key": 200px * $variable #{$variable} 'stirng' function(),
      key: (
        "key": 200px * $variable #{$variable} 'stirng' function()
      )
    )
  )
);


@for $i from 1 through 3 {
  .item-#{$i} { width: 2em * $i; }
}

@each $animal, $color, $cursor in (puma, black, default),
                                  (sea-slug, blue, pointer),
                                  (egret, white, move) {
  .#{$animal}-icon {
    background-image: url('/images/#{$animal}.png');
    border: 2px solid $color;
    cursor: $cursor;
  }
}


$map: (
  key-1: #000,
  key-2: (
    key-3: 123px
  )
);

body {
  content: "double quoted string";
  content: 'single quoted string';
  content: "broken double quoted string will not be highlighted;
  content: 'broken single quoted string will not be highlighted;
  content: "double quoted string contains \escape";
  content: 'single quoted string contains \escape';
  content: "double quoted string contains #{ $variable }";
  content: 'single quoted string contains #{ $variable }';
  content: "double quoted string contains #{ function($variable) + -.5em }";
  content: 'single quoted string contains #{ function($variable) + -.5em }';
}

body {
  width: 123px;
  width: .123px;
  width: -321.123px;
  width: -.123px;
  width: -#{$number}px;
  width: -$variable;
  width: -($variable * 2);
  width: 20px+20px;
  width: auto;

  background: url(../../assets/image.pn
  background: url(../../assets/image.png);

  content: attr(data-att
  content: attr(data-attr);
}


a {
  text-align: center; display: block; line-height: 1.5; background: red;
}


@mixin mixin() {}
@mixin mixin-123_1eaf2u () {}

@function function($a, $b, $c...) {}

@include mixin() {}
@include mixin-123_1eaf2u {}

@else if {}
@if not {}
@if $a or $b {}

@media only screen and (max-width: 100px) and (min-width: 50px) {}

@media print {}


// TODO

body {
  background-image: url(if($bootstrap-sass-asset-helper, twbs-image-path("#{$file-1x}"), "#{$file-1x}"));
}

body::before {
  content '
multiple line string
';
}

#fff {
  box-shadow: 0 0 0 #fff,
    0 0 0 #fff,
    0 0 0 #fff;
}
